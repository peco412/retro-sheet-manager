<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sheet Manager</title>
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.24.7/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      background: linear-gradient(135deg, #f8f6f0 0%, #faf9f6 25%, #f5f3ed 50%, #f8f6f0 75%, #fdfcf8 100%);
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
      color: #2c2c2c;
      line-height: 1.6;
      min-height: 100vh;
    }
    
    .elegant-shadow {
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08), 0 4px 16px rgba(0, 0, 0, 0.04);
    }
    
    .elegant-border {
      border: 1px solid rgba(200, 200, 200, 0.3);
      background: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
    }
    
    .elegant-hover {
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .elegant-hover:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.12), 0 6px 20px rgba(0, 0, 0, 0.06);
    }
    
    .gold-accent {
      background: linear-gradient(135deg, #d4af37, #f4e27c);
      color: #2c2c2c;
    }
    
    .gold-accent:hover {
      background: linear-gradient(135deg, #c19b26, #e6d06b);
    }
    
    .glass-effect {
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }
    
    .input-elegant {
      background: rgba(255, 255, 255, 0.95);
      border: 1px solid rgba(200, 200, 200, 0.4);
      transition: all 0.3s ease;
    }
    
    .input-elegant:focus {
      outline: none;
      border-color: #d4af37;
      box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
    }
    
    .btn-elegant {
      background: linear-gradient(135deg, #2c2c2c, #404040);
      color: white;
      border: none;
      transition: all 0.3s ease;
    }
    
    .btn-elegant:hover {
      background: linear-gradient(135deg, #404040, #2c2c2c);
      transform: translateY(-1px);
    }
    
    .tab-elegant {
      background: rgba(255, 255, 255, 0.8);
      border: 1px solid rgba(200, 200, 200, 0.3);
      color: #666;
      transition: all 0.3s ease;
    }
    
    .tab-elegant.active {
      background: linear-gradient(135deg, #d4af37, #f4e27c);
      color: #2c2c2c;
      border-color: #d4af37;
    }
    
    .tab-elegant:hover:not(.active) {
      background: rgba(212, 175, 55, 0.1);
      border-color: rgba(212, 175, 55, 0.3);
    }
    
    .sheet-card {
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(200, 200, 200, 0.2);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .sheet-card:hover {
      background: rgba(255, 255, 255, 0.95);
      border-color: rgba(212, 175, 55, 0.3);
      transform: translateY(-2px);
      box-shadow: 0 12px 32px rgba(0, 0, 0, 0.1);
    }
    
    .login-form {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(200, 200, 200, 0.3);
    }
    
    .vietnam-flag {
      background: linear-gradient(135deg, #da020e, #ff1744);
      color: white;
    }
  </style>
</head>
<body class="min-h-screen flex flex-col">
  <div id="root"></div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDdJIww8ZPApVUtblguLGLMwqpHQE2P5xw",
      authDomain: "sheetmanagermkt.firebaseapp.com",
      projectId: "sheetmanagermkt",
      storageBucket: "sheetmanagermkt.appspot.com",
      messagingSenderId: "22647060478",
      appId: "1:22647060478:web:323baa9e7643375aef72af"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const App = () => {
      const [isLoggedIn, setIsLoggedIn] = useState(false);
      const [userRole, setUserRole] = useState(null);
      const [sheets, setSheets] = useState([]);
      const [filteredSheets, setFilteredSheets] = useState([]);
      const [searchQuery, setSearchQuery] = useState('');
      const [newSheet, setNewSheet] = useState({ name: '', url: '', folder: 'RSA', subfolder: 'T√†i li·ªáu' });
      const [selectedFolder, setSelectedFolder] = useState('RSA');
      const [selectedSubfolder, setSelectedSubfolder] = useState('All');

      const credentials = {
        admin: { username: 'QLAPT', password: 'QLAPT', role: 'admin' },
        user: { username: 'Marketing@2022', password: 'Marketing@2022', role: 'user' }
      };

      const fetchSheets = async () => {
        try {
          const snapshot = await db.collection("sheets").get();
          const fetched = snapshot.docs.map((doc, index) => ({ id: doc.id, ...doc.data(), index }));
          setSheets(fetched);
          setFilteredSheets(fetched);
        } catch (err) {
          console.error("Fetch error:", err);
        }
      };

      const addSheet = async (e) => {
        e.preventDefault();
        if (!newSheet.name || !newSheet.url) return alert("Please fill all fields");
        try {
          await db.collection("sheets").add(newSheet);
          setNewSheet({ name: '', url: '', folder: 'RSA', subfolder: 'T√†i li·ªáu' });
          fetchSheets();
        } catch (err) {
          alert("Error adding sheet");
        }
      };

      const deleteSheet = async (id) => {
        if (userRole !== 'admin') return alert("Only admin can delete");
        try {
          await db.collection("sheets").doc(id).delete();
          fetchSheets();
        } catch (err) {
          alert("Error deleting sheet");
        }
      };

      const handleLogin = (e) => {
        e.preventDefault();
        const username = e.target.username.value;
        const password = e.target.password.value;
        if (username === credentials.admin.username && password === credentials.admin.password) {
          setIsLoggedIn(true);
          setUserRole("admin");
        } else if (username === credentials.user.username && password === credentials.user.password) {
          setIsLoggedIn(true);
          setUserRole("user");
        } else {
          alert("Invalid credentials");
        }
      };

      useEffect(() => {
        if (isLoggedIn) fetchSheets();
      }, [isLoggedIn]);

      useEffect(() => {
        let filtered = sheets.filter(sheet => sheet.folder === selectedFolder);
        if (selectedSubfolder !== 'All') filtered = filtered.filter(sheet => sheet.subfolder === selectedSubfolder);
        if (searchQuery) filtered = filtered.filter(sheet => sheet.name.toLowerCase().includes(searchQuery.toLowerCase()));
        setFilteredSheets(filtered);
      }, [sheets, selectedFolder, selectedSubfolder, searchQuery]);

      if (!isLoggedIn) {
        return (
          <div className="flex items-center justify-center min-h-screen p-4">
            <div className="login-form p-10 rounded-2xl elegant-shadow w-full max-w-md">
              <div className="text-center mb-8">
                <div className="vietnam-flag p-4 rounded-xl mb-4">
                  <h2 className="text-lg font-semibold">C·ªòNG H√íA X√É H·ªòI CH·ª¶ NGHƒ®A VI·ªÜT NAM</h2>
                  <p className="text-sm opacity-90">ƒê·ªôc l·∫≠p - T·ª± do - H·∫°nh ph√∫c</p>
                </div>
                <h3 className="text-2xl font-bold text-gray-800 mb-2">ƒêƒÉng nh·∫≠p h·ªá th·ªëng</h3>
                <p className="text-gray-600">Vui l√≤ng nh·∫≠p th√¥ng tin ƒëƒÉng nh·∫≠p</p>
              </div>
              
              <form onSubmit={handleLogin} className="space-y-6">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">T√™n ƒëƒÉng nh·∫≠p</label>
                  <input 
                    type="text" 
                    name="username" 
                    className="w-full p-4 rounded-lg input-elegant text-gray-800 font-medium"
                    required 
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">M·∫≠t kh·∫©u</label>
                  <input 
                    type="password" 
                    name="password" 
                    className="w-full p-4 rounded-lg input-elegant text-gray-800 font-medium"
                    required 
                  />
                </div>
                <button 
                  type="submit" 
                  className="w-full gold-accent p-4 rounded-lg font-semibold elegant-hover"
                >
                  ƒêƒÉng nh·∫≠p
                </button>
              </form>
            </div>
          </div>
        );
      }

      return (
        <div className="min-h-screen p-6">
          <div className="max-w-6xl mx-auto">
            <header className="text-center mb-12">
              <div className="inline-block p-8 glass-effect rounded-2xl elegant-shadow mb-6">
                <h1 className="text-5xl font-bold text-gray-800 mb-2">
                  üìä Marketing Sheet Manager
                </h1>
                <p className="text-xl text-gray-600 font-medium">
                  B·∫°n c√≥ sheet, t√¥i c√≥ space
                </p>
              </div>
            </header>

            <div className="glass-effect p-8 rounded-2xl mb-8 elegant-shadow">
              <h2 className="text-2xl font-semibold text-gray-800 mb-6">Th√™m Sheet M·ªõi</h2>
              <form onSubmit={addSheet} className="space-y-6">
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">T√™n Sheet</label>
                    <input 
                      type="text" 
                      placeholder="Nh·∫≠p t√™n sheet..." 
                      value={newSheet.name} 
                      onChange={(e) => setNewSheet({ ...newSheet, name: e.target.value })} 
                      className="w-full p-4 rounded-lg input-elegant text-gray-800"
                      required 
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">URL</label>
                    <input 
                      type="text" 
                      placeholder="Nh·∫≠p URL..." 
                      value={newSheet.url} 
                      onChange={(e) => setNewSheet({ ...newSheet, url: e.target.value })} 
                      className="w-full p-4 rounded-lg input-elegant text-gray-800"
                      required 
                    />
                  </div>
                </div>
                
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Th∆∞ m·ª•c</label>
                    <select 
                      value={newSheet.folder} 
                      onChange={(e) => setNewSheet({ ...newSheet, folder: e.target.value })} 
                      className="w-full p-4 rounded-lg input-elegant text-gray-800"
                    >
                      <option value="RSA">RSA</option>
                      <option value="RSQ">RSQ</option>
                      <option value="RAF">RAF</option>
                    </select>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Th∆∞ m·ª•c con</label>
                    <select 
                      value={newSheet.subfolder} 
                      onChange={(e) => setNewSheet({ ...newSheet, subfolder: e.target.value })} 
                      className="w-full p-4 rounded-lg input-elegant text-gray-800"
                    >
                      <option value="T√†i li·ªáu">T√†i li·ªáu</option>
                      <option value="K·∫ø ho·∫°ch">K·∫ø ho·∫°ch</option>
                    </select>
                  </div>
                </div>
                
                <button 
                  type="submit" 
                  className="w-full btn-elegant p-4 rounded-lg font-semibold elegant-hover"
                >
                  Th√™m Sheet
                </button>
              </form>
            </div>

            <div className="glass-effect p-8 rounded-2xl mb-8 elegant-shadow">
              <h2 className="text-2xl font-semibold text-gray-800 mb-6">L·ªçc & T√¨m ki·∫øm</h2>
              
              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-3">Th∆∞ m·ª•c ch√≠nh</label>
                <div className="flex flex-wrap gap-3">
                  {['RSA', 'RSQ', 'RAF'].map(folder => (
                    <button 
                      key={folder} 
                      onClick={() => setSelectedFolder(folder)} 
                      className={`px-6 py-3 rounded-lg font-medium elegant-hover tab-elegant ${selectedFolder === folder ? 'active' : ''}`}
                    >
                      {folder}
                    </button>
                  ))}
                </div>
              </div>

              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-3">Th∆∞ m·ª•c con</label>
                <div className="flex flex-wrap gap-3">
                  {['All', 'T√†i li·ªáu', 'K·∫ø ho·∫°ch'].map(sub => (
                    <button 
                      key={sub} 
                      onClick={() => setSelectedSubfolder(sub)} 
                      className={`px-6 py-3 rounded-lg font-medium elegant-hover tab-elegant ${selectedSubfolder === sub ? 'active' : ''}`}
                    >
                      {sub}
                    </button>
                  ))}
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-3">T√¨m ki·∫øm</label>
                <input 
                  type="text" 
                  placeholder="T√¨m sheet theo t√™n..." 
                  value={searchQuery} 
                  onChange={(e) => setSearchQuery(e.target.value)} 
                  className="w-full p-4 rounded-lg input-elegant text-gray-800"
                />
              </div>
            </div>

            <div className="space-y-4">
              <h2 className="text-2xl font-semibold text-gray-800 mb-6">
                Danh s√°ch Sheet ({filteredSheets.length})
              </h2>
              
              {filteredSheets.length === 0 ? (
                <div className="text-center py-12">
                  <div className="text-6xl mb-4">üìã</div>
                  <p className="text-xl text-gray-600">Kh√¥ng t√¨m th·∫•y sheet n√†o</p>
                </div>
              ) : (
                filteredSheets.map(sheet => (
                  <div key={sheet.id} className="sheet-card p-6 rounded-xl elegant-shadow">
                    <div className="flex justify-between items-start">
                      <div className="flex-1">
                        <a 
                          href={sheet.url} 
                          target="_blank" 
                          rel="noopener noreferrer"
                          className="text-xl font-semibold text-gray-800 hover:text-yellow-600 transition-colors duration-300 block mb-2"
                        >
                          {sheet.name}
                        </a>
                        <div className="flex items-center space-x-4 text-sm text-gray-600">
                          <span className="px-3 py-1 bg-gray-100 rounded-full font-medium">
                            {sheet.folder}
                          </span>
                          <span className="px-3 py-1 bg-gray-100 rounded-full font-medium">
                            {sheet.subfolder}
                          </span>
                        </div>
                      </div>
                      
                      {userRole === 'admin' && (
                        <button 
                          onClick={() => deleteSheet(sheet.id)} 
                          className="ml-4 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-300"
                        >
                          X√≥a
                        </button>
                      )}
                    </div>
                  </div>
                ))
              )}
            </div>

            <footer className="mt-16 text-center py-8">
              <div className="inline-block glass-effect px-8 py-4 rounded-xl elegant-shadow">
                <p className="text-gray-600 font-medium">
                  Created by <span className="text-yellow-600 font-semibold">MarketingTeamVN</span>
                </p>
              </div>
            </footer>
          </div>
        </div>
      );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
